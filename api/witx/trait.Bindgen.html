<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait for language implementors to use to generate glue code between native WebAssembly signatures and interface types signatures."><meta name="keywords" content="rust, rustlang, rust-lang, Bindgen"><title>witx::Bindgen - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../witx/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Trait Bindgen</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#associated-types">Associated Types</a><div class="sidebar-links"><a href="#associatedtype.Operand">Operand</a></div><a class="sidebar-title" href="#required-methods">Required Methods</a><div class="sidebar-links"><a href="#tymethod.allocate_space">allocate_space</a><a href="#tymethod.emit">emit</a><a href="#tymethod.finish_block">finish_block</a><a href="#tymethod.push_block">push_block</a></div><a class="sidebar-title" href="#implementors">Implementors</a></div><p class="location"><a href="index.html">witx</a></p><div id="sidebar-vars" data-name="Bindgen" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Trait <a href="index.html">witx</a>::<wbr><a class="trait" href="">Bindgen</a><button id="copy-path" onclick="copy_path(this)">⎘</button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/witx/abi.rs.html#392-445" title="goto source code">[src]</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class="rust trait">pub trait Bindgen {
    type <a href="#associatedtype.Operand" class="type">Operand</a>;
    fn <a href="#tymethod.emit" class="fnname">emit</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inst: &amp;<a class="enum" href="../witx/enum.Instruction.html" title="enum witx::Instruction">Instruction</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;operands: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Self::<a class="type" href="../witx/trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Self::<a class="type" href="../witx/trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;);
<div class="item-spacer"></div>    fn <a href="#tymethod.allocate_space" class="fnname">allocate_space</a>(&amp;mut self, slot: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, ty: &amp;<a class="struct" href="../witx/struct.NamedType.html" title="struct witx::NamedType">NamedType</a>);
<div class="item-spacer"></div>    fn <a href="#tymethod.push_block" class="fnname">push_block</a>(&amp;mut self);
<div class="item-spacer"></div>    fn <a href="#tymethod.finish_block" class="fnname">finish_block</a>(&amp;mut self, operand: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="type" href="../witx/trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;);
}</pre></div><div class="docblock"><p>Trait for language implementors to use to generate glue code between native
WebAssembly signatures and interface types signatures.</p>
<p>This is used as an implementation detail in interpreting the ABI between
interface types and wasm types. Eventually this will be driven by interface
types adapters themselves, but for now the ABI of a function dictates what
instructions are fed in.</p>
<p>Types implementing <code>Bindgen</code> are incrementally fed <code>Instruction</code> values to
generate code for. Instructions operate like a stack machine where each
instruction has a list of inputs and a list of outputs (provided by the
<code>emit</code> function).</p>
</div><h2 id="associated-types" class="small-section-header">Associated Types<a href="#associated-types" class="anchor"></a></h2><div class="methods"><h3 id="associatedtype.Operand" class="method"><code>type <a href="#associatedtype.Operand" class="type">Operand</a></code><a class="srclink" href="../src/witx/abi.rs.html#396" title="goto source code">[src]</a></h3><div class="docblock"><p>The intermediate type for fragments of code for this type.</p>
<p>For most languages <code>String</code> is a suitable intermediate type.</p>
</div></div><span class="loading-content">Loading content...</span><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><h3 id="tymethod.emit" class="method"><code>fn <a href="#tymethod.emit" class="fnname">emit</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;inst: &amp;<a class="enum" href="../witx/enum.Instruction.html" title="enum witx::Instruction">Instruction</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;operands: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Self::<a class="type" href="../witx/trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;results: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Self::<a class="type" href="../witx/trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;<br>)</code><a class="srclink" href="../src/witx/abi.rs.html#406-411" title="goto source code">[src]</a></h3><div class="docblock"><p>Emit code to implement the given instruction.</p>
<p>Each operand is given in <code>operands</code> and can be popped off if ownership
is required. It’s guaranteed that <code>operands</code> has the appropriate length
for the <code>inst</code> given, as specified with <a href="../witx/enum.Instruction.html" title="Instruction"><code>Instruction</code></a>.</p>
<p>Each result variable should be pushed onto <code>results</code>. This function must
push the appropriate number of results or binding generation will panic.</p>
</div><h3 id="tymethod.allocate_space" class="method"><code>fn <a href="#tymethod.allocate_space" class="fnname">allocate_space</a>(&amp;mut self, slot: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, ty: &amp;<a class="struct" href="../witx/struct.NamedType.html" title="struct witx::NamedType">NamedType</a>)</code><a class="srclink" href="../src/witx/abi.rs.html#418" title="goto source code">[src]</a></h3><div class="docblock"><p>Allocates temporary space in linear memory indexed by <code>slot</code> with enough
space to store <code>ty</code>.</p>
<p>This is called when calling some wasm functions where a return pointer
is needed.</p>
</div><h3 id="tymethod.push_block" class="method"><code>fn <a href="#tymethod.push_block" class="fnname">push_block</a>(&amp;mut self)</code><a class="srclink" href="../src/witx/abi.rs.html#429" title="goto source code">[src]</a></h3><div class="docblock"><p>Enters a new block of code to generate code for.</p>
<p>This is currently exclusively used for constructing variants. When a
variant is constructed a block here will be pushed for each case of a
variant, generating the code necessary to translate a variant case.</p>
<p>Blocks are completed with <code>finish_block</code> below. It’s expected that <code>emit</code>
will always push code (if necessary) into the “current block”, which is
updated by calling this method and <code>finish_block</code> below.</p>
</div><h3 id="tymethod.finish_block" class="method"><code>fn <a href="#tymethod.finish_block" class="fnname">finish_block</a>(&amp;mut self, operand: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="type" href="../witx/trait.Bindgen.html#associatedtype.Operand" title="type witx::Bindgen::Operand">Operand</a>&gt;)</code><a class="srclink" href="../src/witx/abi.rs.html#444" title="goto source code">[src]</a></h3><div class="docblock"><p>Indicates to the code generator that a block is completed, and the
<code>operand</code> specified was the resulting value of the block.</p>
<p>This method will be used to compute the value of each arm of lifting a
variant. The <code>operand</code> will be <code>None</code> if the variant case didn’t
actually have any type associated with it. Otherwise it will be <code>Some</code>
as the last value remaining on the stack representing the value
associated with a variant’s <code>case</code>.</p>
<p>It’s expected that this will resume code generation in the previous
block before <code>push_block</code> was called. This must also save the results
of the current block internally for instructions like <code>ResultLift</code> to
use later.</p>
</div></div><span class="loading-content">Loading content...</span><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"></div><span class="loading-content">Loading content...</span><script type="text/javascript" src="../implementors/witx/trait.Bindgen.js" async></script></section><section id="search" class="content hidden"></section><section class="footer"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="witx" data-search-js="../search-index.js"></div>
    <script src="../main.js"></script></body></html>